{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<style>
  .welcome-card {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 16px;
    padding: 2.5rem;
    margin-bottom: 2rem;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2);
  }
  
  .welcome-title {
    font-size: 2.5rem;
    font-weight: 800;
    margin-bottom: 0.5rem;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
  
  .welcome-subtitle {
    font-size: 1.25rem;
    opacity: 0.9;
  }
  
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
  }
  
  .stat-card {
    background: white;
    border-radius: 16px;
    padding: 1.5rem;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    border: 1px solid #e5e7eb;
    position: relative;
    overflow: hidden;
  }
  
  .stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(to bottom, var(--color-1), var(--color-2));
  }
  
  .stat-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.15);
  }
  
  .stat-icon {
    width: 60px;
    height: 60px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.75rem;
    margin-bottom: 1rem;
  }
  
  .stat-value {
    font-size: 2.5rem;
    font-weight: 800;
    color: #1f2937;
    margin-bottom: 0.25rem;
  }
  
  .stat-label {
    font-size: 0.875rem;
    color: #6b7280;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
  
  .quick-actions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
  }
  
  .action-card {
    background: white;
    border-radius: 16px;
    padding: 2rem;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    border: 2px solid transparent;
    text-decoration: none;
    color: inherit;
    display: block;
  }
  
  .action-card:hover {
    transform: translateY(-4px);
    border-color: var(--primary-blue);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.15);
  }
  
  .action-icon {
    width: 80px;
    height: 80px;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
    margin-bottom: 1.5rem;
    background: linear-gradient(135deg, var(--color-1), var(--color-2));
    color: white;
  }
  
  .action-title {
    font-size: 1.25rem;
    font-weight: 700;
    color: #1f2937;
    margin-bottom: 0.5rem;
  }
  
  .action-description {
    font-size: 0.9375rem;
    color: #6b7280;
    line-height: 1.6;
  }
</style>

<!-- Welcome Card -->
<div class="welcome-card">
  <div class="welcome-title">
    <i class="fas fa-hand-sparkles"></i>
    ¡Bienvenido, {{ user.nombre_completo }}!
  </div>
  <div class="welcome-subtitle">
    Tu rol en el sistema: <strong>{{ user.rol }}</strong>
  </div>
</div>

<!-- Estadísticas -->
<div class="stats-grid">
  <div class="stat-card" style="--color-1: #3b82f6; --color-2: #8b5cf6;">
    <div class="stat-icon" style="background: linear-gradient(135deg, #dbeafe, #e9d5ff);">
      <i class="fas fa-bed" style="color: #3b82f6;"></i>
    </div>
    <div class="stat-value">42</div>
    <div class="stat-label">Habitaciones Totales</div>
  </div>
  
  <div class="stat-card" style="--color-1: #10b981; --color-2: #059669;">
    <div class="stat-icon" style="background: linear-gradient(135deg, #d1fae5, #a7f3d0);">
      <i class="fas fa-check-circle" style="color: #10b981;"></i>
    </div>
    <div class="stat-value">28</div>
    <div class="stat-label">Disponibles</div>
  </div>
  
  <div class="stat-card" style="--color-1: #f59e0b; --color-2: #d97706;">
    <div class="stat-icon" style="background: linear-gradient(135deg, #fef3c7, #fde68a);">
      <i class="fas fa-door-open" style="color: #f59e0b;"></i>
    </div>
    <div class="stat-value">14</div>
    <div class="stat-label">Ocupadas</div>
  </div>
  
  <div class="stat-card" style="--color-1: #ef4444; --color-2: #dc2626;">
    <div class="stat-icon" style="background: linear-gradient(135deg, #fee2e2, #fecaca);">
      <i class="fas fa-calendar-check" style="color: #ef4444;"></i>
    </div>
    <div class="stat-value">23</div>
    <div class="stat-label">Reservas Activas</div>
  </div>
</div>

<!-- Acciones Rápidas -->
<div class="card">
  <div class="card-header">
    <i class="fas fa-bolt"></i>
    Accesos Rápidos
  </div>
  
  <div class="quick-actions-grid">
    <a href="{% url 'reservas_list' %}" class="action-card">
      <div class="action-icon" style="--color-1: #3b82f6; --color-2: #8b5cf6;">
        <i class="fas fa-calendar-plus"></i>
      </div>
      <div class="action-title">Ver Reservas</div>
      <div class="action-description">
        Gestiona todas las reservas del hotel
      </div>
    </a>
    
    <a href="{% url 'clientes_list' %}" class="action-card">
      <div class="action-icon" style="--color-1: #10b981; --color-2: #059669;">
        <i class="fas fa-users"></i>
      </div>
      <div class="action-title">Ver Clientes</div>
      <div class="action-description">
        Administra la base de datos de clientes
      </div>
    </a>
    
    <a href="{% url 'habitaciones_list' %}" class="action-card">
      <div class="action-icon" style="--color-1: #f59e0b; --color-2: #d97706;">
        <i class="fas fa-bed"></i>
      </div>
      <div class="action-title">Habitaciones</div>
      <div class="action-description">
        Gestiona el inventario de habitaciones
      </div>
    </a>
    
    <a href="{% url 'pagos_list' %}" class="action-card">
      <div class="action-icon" style="--color-1: #06b6d4; --color-2: #0891b2;">
        <i class="fas fa-credit-card"></i>
      </div>
      <div class="action-title">Pagos</div>
      <div class="action-description">
        Revisa y registra pagos
      </div>
    </a>
    
    {% if user.rol == 'gerente' or user.rol == 'administrador' %}
    <a href="#" class="action-card">
      <div class="action-icon" style="--color-1: #8b5cf6; --color-2: #7c3aed;">
        <i class="fas fa-chart-line"></i>
      </div>
      <div class="action-title">Generar Reportes</div>
      <div class="action-description">
        Solo Gerencia/Admin - Reportes estadísticos
      </div>
    </a>
    {% endif %}
    
    {% if user.rol == 'administrador' %}
    <a href="#" class="action-card">
      <div class="action-icon" style="--color-1: #ef4444; --color-2: #dc2626;">
        <i class="fas fa-shield-alt"></i>
      </div>
      <div class="action-title">Ver Auditoría</div>
      <div class="action-description">
        Solo Admin - Registro de cambios
      </div>
    </a>
    {% endif %}
  </div>
</div>

<!-- Información del Sistema -->
<div class="card" style="background: linear-gradient(135deg, #f0f9ff, #faf5ff); border: 2px solid #dbeafe;">
  <div style="display: flex; align-items: start; gap: 1rem;">
    <div style="flex-shrink: 0;">
      <div style="width: 60px; height: 60px; border-radius: 12px; background: linear-gradient(135deg, #3b82f6, #8b5cf6); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.75rem;">
        <i class="fas fa-info-circle"></i>
      </div>
    </div>
    <div style="flex: 1;">
      <h5 style="color: #1e40af; font-weight: 700; margin-bottom: 0.75rem;">
        Sistema de Gestión Hotelera
      </h5>
      <p style="color: #4b5563; margin-bottom: 0.5rem;">
        Bienvenido al sistema de gestión del <strong>Hotel Diego de Almagro</strong>.
      </p>
      <ul style="color: #6b7280; font-size: 0.9375rem; line-height: 1.8; margin-top: 1rem;">
        <li>Control completo de reservas y habitaciones</li>
        <li>Gestión de clientes y pagos</li>
        <li>Servicios adicionales personalizables</li>
        <li>Sistema de roles y permisos (RBAC)</li>
      </ul>
    </div>
  </div>
</div>

<script>
  // Animación de contador para las estadísticas
  document.addEventListener('DOMContentLoaded', function() {
    const statValues = document.querySelectorAll('.stat-value');
    
    statValues.forEach(stat => {
      const targetValue = parseInt(stat.textContent);
      let currentValue = 0;
      const increment = Math.ceil(targetValue / 30);
      
      const counter = setInterval(() => {
        currentValue += increment;
        if (currentValue >= targetValue) {
          stat.textContent = targetValue;
          clearInterval(counter);
        } else {
          stat.textContent = currentValue;
        }
      }, 30);
    });
  });
</script>

{% endblock %}